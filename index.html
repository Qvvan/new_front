<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Dragon VPN</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS Modules -->
    <link rel="stylesheet" href="css/globals.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layouts.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/simple-media.css">
</head>
<body>
    <div class="app-container">
        <!-- Background Effects -->
        <div class="background-glow"></div>

        <!-- Loading Screen -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">Загрузка...</div>
        </div>

        <!-- Payment Banner (показывается при pending платежах) -->
        <div class="payment-banner hidden" id="paymentBanner">
            <div class="payment-banner-content">
                <div class="payment-info">
                    <div class="payment-timer">
                        <div class="timer-circle">
                            <svg class="timer-progress" width="32" height="32">
                                <circle cx="16" cy="16" r="14" stroke-width="2"></circle>
                            </svg>
                            <span class="timer-text" id="paymentTimer">59:59</span>
                        </div>
                        <div class="payment-text">
                            <div class="payment-title">Время оплаты</div>
                            <div class="payment-subtitle">Ожидание платежа</div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-sm btn-primary" id="continuePaymentBtn">
                    Продолжить оплату
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Subscription Screen -->
            <div class="screen active" id="subscriptionScreen">
                <!-- Subscription content will be rendered here -->
            </div>

            <!-- Keys Screen -->
            <div class="screen" id="keysScreen">
                <!-- Keys content will be rendered here -->
            </div>

            <!-- Referrals Screen -->
            <div class="screen" id="referralsScreen">
                <!-- Referrals content will be rendered here -->
            </div>

            <!-- Payments Screen -->
            <div class="screen" id="paymentsScreen">
                <!-- Payments content will be rendered here -->
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav" id="bottomNav">
            <div class="nav-grid">
                <div class="nav-item active" data-screen="subscription">
                    <i class="fas fa-shield-alt nav-icon"></i>
                    <span class="nav-label">Подписка</span>
                </div>
                <div class="nav-item" data-screen="keys">
                    <i class="fas fa-key nav-icon"></i>
                    <span class="nav-label">Ключи</span>
                </div>
                <div class="nav-item" data-screen="referrals">
                    <i class="fas fa-users nav-icon"></i>
                    <span class="nav-label">Рефералы</span>
                </div>
                <div class="nav-item" data-screen="payments">
                    <i class="fas fa-credit-card nav-icon"></i>
                    <span class="nav-label">Платежи</span>
                    <div class="nav-badge hidden" id="paymentsBadge">1</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Container -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Core JS -->
    <script src="js/core/utils.js"></script>
    <script src="js/core/storage.js"></script>
    <script src="js/core/telegram.js"></script>
    <script src="js/api/client.js"></script>
    <script src="js/utils/assets.js"></script>
    <script src="js/utils/simple-media-cache.js"></script>
    <script src="js/utils/simple-lazy.js"></script>

    <!-- API Modules -->
    <script src="js/api/user.js"></script>
    <script src="js/api/subscription.js"></script>
    <script src="js/api/payment.js"></script>
    <script src="js/api/currency.js"></script>
    <script src="js/api/keys.js"></script>
    <script src="js/api/referral.js"></script>
    <script src="js/api/services.js"></script>

    <!-- Utils -->
    <script src="js/utils/tgs_loader.js"></script>

    <!-- Components -->
    <script src="js/components/toast.js"></script>
    <script src="js/components/modal.js"></script>
    <script src="js/components/loading.js"></script>
    <script src="js/components/navigation.js"></script>
    <script src="js/components/subscription-card.js"></script>
    <script src="js/components/service-selector.js"></script>
    <script src="js/components/payment-banner.js"></script>

    <!-- Services -->
    <script src="js/services/haptic.js"></script>
    <script src="js/services/payment-monitor.js"></script>
    <script src="js/services/referral-parser.js"></script>
    <script src="js/services/subscription-manager.js"></script>

    <!-- Screens -->
    <script src="js/screens/subscription.js"></script>
    <script src="js/screens/keys.js"></script>
    <script src="js/screens/referrals.js"></script>
    <script src="js/screens/payments.js"></script>
    <script src="js/screens/instructions.js"></script>
    <script src="js/screens/support.js"></script>

    <!-- Router and Main App -->
    <script src="js/core/router.js"></script>
    <script src="js/core/app.js"></script>
</body>
</html>